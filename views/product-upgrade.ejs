<%- include('./head.ejs')  %>
<%- include('./scanBarCode.ejs')  %> 
<%- include('./menu.ejs')  %> 
<main>
  <h1><%= title %></h1>
  <div class="container  container-form">
    <form action="/products/upgrade" method="POST" class="product-form" id="upgrade-product-form">
      <label for="name"> Nombre del producto: 
        <input type="text" name="name" placeholder="Electródo para madera" value="<%= product.name %>" required>
      </label>
      <label for="description">Descripción: 
        <input type="text" name="description" placeholder="Electródo para soldar madera" value="<%= product.description %>" required>
      </label>
      <label for="code"> Código Interno : 
        <input type="text" pattern="^([A-Z]{2})+([0-9]{6})$" title="El codigo debe iniciar con 2 letras mayúsculas y finalizar con 6 números" value="<%= product.code %>" placeholder="CR001001" name="code" required>
      </label>
      <label for="type">
        Seleccione el tipo de producto:
        <select name="type">
          <option value="ferreteria"<% if(product.type === "fereteria") {%> selected<% } %> >Ferretería</option>
          <option value="pintureria" <% if(product.type === "pintureria") {%> selected<% } %> >Pinturería</option>
          <option value="carpintería" <% if(product.type === "carpintería") {%> selected<% } %> >Carpintería</option>
        </select>
      </label>
      <label for="minStock">Stock Mínimo: 
        <input type="number" name="minStock" title="Debe ingresar el Stock minimo con Numeros enteros" pattern="^[0-9]{1,20}$" placeholder="50" value="<%= product.minStock %>" required>
      </label>
      <label for="barCode">Escanear Código De Barra: <input type="text" name="barCodeScan" placeholder="347 1 06548725" value="<%= product.barCode %>" disabled required></label>
      <label for="barCodeDos">Repita el Código De Barra: <input type="text" name="barCode" placeholder="347 1 06548725" value="<%= product.barCode %>" required></label>
      <button type="button" class="btn-code-scan">Escanear Código <img id="camera-icon" src="/assets/camera-icon.svg" alt="Saca una foto"></button>
      <input type="hidden" name="id" value="<%= product.id %>" required>
      <input type="hidden" name="stock" value="<%= product.stock %>" required>
      <!-- <input type="submit" id="btnSubmitForm" value="Enviar"> -->
      <input type="hidden" name="_method" value="PUT">
      <button type="submit"  id="btnSubmitForm">Enviar</button>
    </form>
  </div>
  <template id="show-template">
    <article class="problem">
      <h3></h3>
      <p></p>
      <input type="button">
    </article>
  </template>
</main>
<script src="https://unpkg.com/html5-qrcode"></script>
<script>
  const productsList = <%-JSON.stringify(productsList)  %>;
</script>
<%- include('./footer.ejs')  %> 
